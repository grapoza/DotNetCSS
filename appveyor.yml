--- 
version: '1.0.{build}'
image: Visual Studio 2017
      
# Default configuration
configuration: Debug
init:
  - cmd: git config --global core.autocrlf true
before_build:
  - cmd: dotnet restore DotNetCSS.sln --verbosity m
build_script:
  - cmd: dotnet build --no-restore # msbuild DotNetCSS.sln /logger:"C:\Program Files\AppVeyor\BuildAgent\Appveyor.MSBuildLogger.dll"
test_script:
  - cmd: dotnet test "src/DotNetCSS.Tests/DotNetCSS.Tests.csproj" --no-build

# configuration for "master" branch
# build in Release mode; set PublicRelease=true for GitVersioning
for: 
  - 
    branches: 
      only: 
        - master
    configuration: Release
    build_script:
      - cmd: dotnet build /p:PublicRelease=true
    after_test:
      - cmd: dotnet pack "src/DotNetCSS/DotNetCSS.csproj" --no-build
    artifacts:
      - path: '**\*.nupkg'
...
